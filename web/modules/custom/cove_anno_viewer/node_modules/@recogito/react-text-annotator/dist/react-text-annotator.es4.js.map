{"version":3,"file":"react-text-annotator.es4.js","sources":["../src/TextAnnotator.tsx"],"sourcesContent":["import { ReactNode, useContext, useEffect, useRef } from 'react';\nimport { AnnotoriousContext, Filter } from '@annotorious/react';\nimport type { FormatAdapter } from '@annotorious/core';\nimport type { HighlightStyleExpression, TextAnnotation, TextAnnotatorOptions } from '@recogito/text-annotator';\nimport { createTextAnnotator } from '@recogito/text-annotator';\n\nimport '@recogito/text-annotator/dist/text-annotator.css';\n\nexport interface TextAnnotatorProps<I extends TextAnnotation = TextAnnotation, E extends unknown = TextAnnotation> extends Omit<TextAnnotatorOptions<I, E>, 'adapter'> {\n\n  children?: ReactNode | JSX.Element;\n\n  adapter?: FormatAdapter<I, E> | ((container: HTMLElement) => FormatAdapter<I, E>) | null;\n\n  filter?: Filter<I>;\n\n  style?: HighlightStyleExpression;\n\n  className?: string;\n\n}\n\nexport const TextAnnotator = <I extends TextAnnotation = TextAnnotation, E extends unknown = TextAnnotation>(\n  props: TextAnnotatorProps<I, E>\n) => {\n\n  const el = useRef<HTMLDivElement>(null);\n\n  const { className, children, ...opts } = props;\n  \n  const { style, filter, user } = opts;\n\n  const { anno, setAnno } = useContext(AnnotoriousContext);\n\n  useEffect(() => {\n    if (!setAnno) return;\n\n    const adapter = typeof opts.adapter === 'function' ? opts.adapter(el.current) : opts.adapter;\n\n    const anno = createTextAnnotator(el.current, { ...opts, adapter });\n    setAnno(anno);\n\n    return () => anno.destroy();\n  }, [setAnno]);\n\n  useEffect(() => anno?.setStyle(style), [anno, style]);\n\n  useEffect(() => anno?.setFilter(filter), [anno, filter]);\n\n  useEffect(() => anno?.setUser(user), [anno, user]);\n\n  return (\n    <div ref={el} className={className}>\n      {children}\n    </div>\n  )\n\n}\n"],"names":["anno","jsx"],"mappings":";;;;;AAsBa,MAAA,gBAAgB,CAC3B,UACG;AAEG,QAAA,KAAK,OAAuB,IAAI;AAEtC,QAAM,EAAE,WAAW,UAAU,GAAG,KAAS,IAAA;AAEzC,QAAM,EAAE,OAAO,QAAQ,KAAS,IAAA;AAEhC,QAAM,EAAE,MAAM,YAAY,WAAW,kBAAkB;AAEvD,YAAU,MAAM;AACd,QAAI,CAAC,QAAS;AAER,UAAA,UAAU,OAAO,KAAK,YAAY,aAAa,KAAK,QAAQ,GAAG,OAAO,IAAI,KAAK;AAE/EA,UAAAA,QAAO,oBAAoB,GAAG,SAAS,EAAE,GAAG,MAAM,SAAS;AACjE,YAAQA,KAAI;AAEL,WAAA,MAAMA,MAAK,QAAQ;AAAA,EAAA,GACzB,CAAC,OAAO,CAAC;AAEF,YAAA,MAAM,6BAAM,SAAS,QAAQ,CAAC,MAAM,KAAK,CAAC;AAE1C,YAAA,MAAM,6BAAM,UAAU,SAAS,CAAC,MAAM,MAAM,CAAC;AAE7C,YAAA,MAAM,6BAAM,QAAQ,OAAO,CAAC,MAAM,IAAI,CAAC;AAEjD,SACGC,kCAAAA,IAAA,OAAA,EAAI,KAAK,IAAI,WACX,UACH;AAGJ;"}