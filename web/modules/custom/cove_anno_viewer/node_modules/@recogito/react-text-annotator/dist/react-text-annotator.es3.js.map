{"version":3,"file":"react-text-annotator.es3.js","sources":["../src/tei/TEIAnnotator.tsx"],"sourcesContent":["import { Children, ReactElement, ReactNode, cloneElement, useCallback, useContext, useEffect } from 'react';\nimport { AnnotoriousContext, Filter } from '@annotorious/react';\nimport { TEIPlugin } from '@recogito/text-annotator-tei';\nimport { createTextAnnotator, HighlightStyleExpression } from '@recogito/text-annotator';\nimport type { TextAnnotatorOptions } from '@recogito/text-annotator';\n\nimport '@recogito/text-annotator/dist/text-annotator.css';\n\nexport type TEIAnnotatorProps = TextAnnotatorOptions & {\n\n  children?: ReactNode | JSX.Element;\n\n  filter?: Filter;\n\n  style?: HighlightStyleExpression\n\n}\n\nexport const TEIAnnotator = (props: TEIAnnotatorProps) => {\n\n  const { children, ...opts } = props;\n\n  const { anno, setAnno } = useContext(AnnotoriousContext);\n\n  const onLoad = useCallback((element: HTMLElement) => {\n    const anno = TEIPlugin(createTextAnnotator(element, opts));\n    setAnno(anno);\n  }, []);\n\n  useEffect(() => {\n    if (!anno)\n      return;\n    \n    anno.setStyle(props.style);\n  }, [props.style]);\n\n  useEffect(() => {\n    if (!anno)\n      return;\n    \n    anno.setFilter(props.filter);\n  }, [props.filter]);\n\n  return props.children ? (\n    <>\n      {Children.toArray(props.children).map(child => \n        cloneElement(child as ReactElement, { onLoad }))}\n    </>\n  ) : null;\n\n}\n"],"names":["anno","jsx","Fragment"],"mappings":";;;;;;AAkBa,MAAA,eAAe,CAAC,UAA6B;AAExD,QAAM,EAAE,UAAU,GAAG,KAAA,IAAS;AAE9B,QAAM,EAAE,MAAM,YAAY,WAAW,kBAAkB;AAEjD,QAAA,SAAS,YAAY,CAAC,YAAyB;AACnD,UAAMA,QAAO,UAAU,oBAAoB,SAAS,IAAI,CAAC;AACzD,YAAQA,KAAI;AAAA,EACd,GAAG,EAAE;AAEL,YAAU,MAAM;AACd,QAAI,CAAC;AACH;AAEG,SAAA,SAAS,MAAM,KAAK;AAAA,EAAA,GACxB,CAAC,MAAM,KAAK,CAAC;AAEhB,YAAU,MAAM;AACd,QAAI,CAAC;AACH;AAEG,SAAA,UAAU,MAAM,MAAM;AAAA,EAAA,GAC1B,CAAC,MAAM,MAAM,CAAC;AAEjB,SAAO,MAAM,WACXC,sCAAAC,kBAAAA,UAAA,EACG,UAAS,SAAA,QAAQ,MAAM,QAAQ,EAAE,IAAI,CAAA,UACpC,aAAa,OAAuB,EAAE,OAAQ,CAAA,CAAC,EACnD,CAAA,IACE;AAEN;"}